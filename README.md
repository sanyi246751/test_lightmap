# ğŸ® ä¸‰ç¾©é„‰å…¬æ‰€è·¯ç‡ˆç®¡ç†èˆ‡ç½®æ›ç³»çµ± (Sanyi Lightmap)

[![Vite](https://img.shields.io/badge/Vite-6.2.0-646CFF?logo=vite&logoColor=white)](https://vitejs.dev/)
[![React](https://img.shields.io/badge/React-19.0.0-61DAFB?logo=react&logoColor=white)](https://react.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-4.0-38B2AC?logo=tailwind-css&logoColor=white)](https://tailwindcss.com/)

é€™æ˜¯ä¸€å€‹å°ˆç‚º **è‹—æ —ç¸£ä¸‰ç¾©é„‰å…¬æ‰€** é‡èº«æ‰“é€ çš„è·¯ç‡ˆç®¡ç†èˆ‡ç¶­ä¿®é€šå ±ç³»çµ±ã€‚æ•´åˆäº† GIS åœ°ç†è³‡è¨Šã€Google Sheets è‡ªå‹•åŒ–å¾Œç«¯èˆ‡å³æ™‚å½±åƒå›å‚³åŠŸèƒ½ï¼Œæ—¨åœ¨å¤§å¹…æå‡è·¯ç‡ˆä¿®ç¹•çš„è¡Œæ”¿æ•ˆç‡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹è‰²

- **ğŸ“ æ™ºæ…§åœ°ç†è¦–è¦ºåŒ–**ï¼šæ•´åˆ Sanyi Village GeoJSON é‚Šç•Œè³‡æ–™ï¼Œå‹•æ…‹å‘ˆç¾å„æ‘é‡Œè·¯ç‡ˆåˆ†ä½ˆèˆ‡ç‹€æ…‹ã€‚
- **ğŸ›¡ï¸ è§’è‰²åˆ†æ¬Šç³»çµ±**ï¼š
  - **æ‰¿è¾¦äººå“¡**ï¼šç·¨è™Ÿå¿«é€ŸæŸ¥è©¢ã€æŸ¥çœ‹å¾…ä¿®æ¸…å–®ã€ç™¼èµ·é€šå ±ã€‚
  - **ç¶­ä¿®äººå“¡**ï¼šç²¾æº–å®šä½æ•…éšœé»ã€æŸ¥çœ‹æ¡ˆä»¶è©³æƒ…ã€**ä½¿ç”¨ç¶­ä¿®å›å ±ç³»çµ±**ã€‚
  - **ç®¡ç†å–®ä½**ï¼šè·¯ç‡ˆè³‡æ–™ç½®æ›åŠ©æ‰‹ (Replacement Helper)ï¼Œæ”¯æ´æ‰¹æ¬¡æ›´æ­£èˆ‡æ‘é‡Œåˆ¥è‡ªå‹•åˆ¤å®šã€‚
- **ğŸ“‹ è·¯ç‡ˆç¶­ä¿®å›å ±ç³»çµ±**ï¼šå°ˆç‚ºç¾å ´ç¶­ä¿®äººå“¡è¨­è¨ˆï¼Œæ”¯æ´ï¼š
  - **å¤šçµ„ç…§ç‰‡ä¸Šå‚³**ï¼šæ¯ä¸€æ¡ˆå¯ä¸Šå‚³å¤šçµ„ã€Œç¶­ä¿®å‰/å¾Œã€å°æ¯”ç…§ç‰‡ã€‚
  - **è‡ªå‹•æ—¥æœŸæå–**ï¼šåˆ©ç”¨ `exif-js` å¾ç…§ç‰‡ä¸­è‡ªå‹•è®€å–æ‹æ”æ—¥æœŸï¼Œæ¸›å°‘æ‰‹å‹•è¼¸å…¥ã€‚
  - **å¿«é€Ÿå‚™è¨»**ï¼šæä¾›å¸¸ç”¨ç¶­ä¿®èªªæ˜ï¼ˆå¦‚ï¼šå¤–ç·šæ•…éšœã€è‡ªå‚™ç·šæ•…éšœï¼‰å¿«é¸åŠŸèƒ½ã€‚
  - **å…å¯†ç¢¼æ“ä½œ**ï¼šè€ƒé‡ç¾å ´æ–½ä½œä¾¿åˆ©æ€§ï¼Œå›å ±ç³»çµ±æ¡ç„¡å¯†ç¢¼è¨­è¨ˆã€‚
- **âš™ï¸ è‡ªå‹•åŒ–ç·¨è™Ÿé‚è¼¯**ï¼šç³»çµ±æœƒæ ¹æ“šè·¯ç‡ˆåº§æ¨™è‡ªå‹•åˆ¤æ–·æ‰€å±¬æ‘é‡Œä¸¦ç”Ÿæˆç·¨è™Ÿï¼›è¶…å‡ºé‚Šç•Œä¹‹è·¯ç‡ˆå‰‡è‡ªå‹•æ­¸é¡ç‚ºç‰¹æ®Š IDã€‚
- **ğŸ“¸ å½±åƒåŒ–æŸ¥ä¿®è¿½è¹¤**ï¼šæ”¯æ´ç¾å ´ç…§ç‰‡å³æ™‚ä¸Šå‚³è‡³ Google Driveï¼Œä¸¦åŒæ­¥é€£çµè‡³æ­·å²ç´€éŒ„è¡¨å–®ã€‚
- **ğŸ“Š é›²ç«¯ç•°å‹•è»Œè·¡**ï¼šæ‰€æœ‰ä¿®æ”¹å‡æœƒè¨˜éŒ„åœ¨ã€Œè·¯ç‡ˆç½®æ›è³‡æ–™ã€ä¸­ï¼Œæ”¯æ´ç•°å‹•é‚„åŸèˆ‡æ­·å²æŸ¥é–±ã€‚

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

- **Frontend**: `React 19` + `TypeScript` + `Vite`
- **Styling**: `Tailwind CSS 4` + `Framer Motion` (æµæš¢å‹•æ…‹ UI)
- **Map Library**: `Leaflet` & `React-Leaflet` (åœ°åœ–æ¸²æŸ“èˆ‡é»ä½èšåˆ)
- **Image Processing**: `exif-js` (æå–ç…§ç‰‡å…ƒæ•¸æ“š)
- **Backend**: `Google Apps Script (GAS)` (æä¾› RESTful API ä»‹é¢)
- **Database**: `Google Sheets` & `Google Drive` (ç…§ç‰‡å„²å­˜)

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1. æœ¬åœ°é–‹ç™¼
ç¢ºä¿ä½ çš„ Node.js ç‰ˆæœ¬ç‚º v18 ä»¥ä¸Šã€‚
```bash
# å®‰è£å¥—ä»¶
npm install

# å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
npm run dev
```

### 2. ç’°å¢ƒè®Šæ•¸
å»ºç«‹ `.env.local` ä¸¦è¨­å®šç®¡ç†å¯†ç¢¼ï¼š
```env
VITE_ADMIN_PASSWORD=ä½ çš„å¯†ç¢¼
```
âš ï¸ æ‚¨ç¾åœ¨å¿…é ˆåŸ·è¡Œçš„æ­¥é©Ÿï¼ˆéå¸¸é‡è¦ï¼‰ï¼š
é€™ä¸€æ­¥æ˜¯ç‚ºäº†è®“ GitHub çŸ¥é“å¯†ç¢¼æ˜¯å¤šå°‘ï¼Œä½†åˆä¸é¡¯ç¤ºå‡ºä¾†ï¼š

æ‰“é–‹æ‚¨çš„ GitHub å€‰åº«ç¶²é ã€‚
é»æ“Šä¸Šæ–¹çš„ ã€ŒSettingsã€ (è¨­å®š)ã€‚
åœ¨å·¦å´é¸å–®ä¸­æ‰¾åˆ° ã€ŒSecrets and variablesã€ â” ã€ŒActionsã€ã€‚
é»æ“Šå³å´çš„ ã€ŒNew repository secretã€ã€‚
Name æ¬„ä½è¼¸å…¥ï¼šVITE_ADMIN_PASSWORDã€‚
Secret æ¬„ä½è¼¸å…¥ï¼šXXXXXX (æ‚¨çš„å¯†ç¢¼)ã€‚
é»æ“Š ã€ŒAdd secretã€ã€‚
é€™æ¨£åšçš„å¥½è™•ï¼š
ç¨‹å¼ç¢¼æ›´ä¹¾æ·¨ï¼šGitHub ä¸Šçš„æª”æ¡ˆåªæœƒé¡¯ç¤º import.meta.env.VITE_ADMIN_PASSWORDï¼Œæ²’äººçŸ¥é“å¯¦éš›å¯†ç¢¼ã€‚
ç§å¯†æ€§æ¥µé«˜ï¼šåªæœ‰æ‚¨ï¼ˆå€‰åº«æ‰€æœ‰äººï¼‰èƒ½è¨­å®šé€™å€‹ Secretï¼Œä¸”ä¸€æ—¦è¨­å®šå¾Œé€£æ‚¨è‡ªå·±éƒ½åªèƒ½ã€Œæ›´æ›ã€è€Œä¸èƒ½å†çœ‹åˆ°å…§å®¹ï¼Œè·¯äººå®Œå…¨ç„¡æ³•å¾—çŸ¥ã€‚
è‡ªå‹•åŒ–ç·¨è­¯ï¼šä¸‹æ¬¡æ‚¨ä¸Šå‚³ (Push) ç¨‹å¼ç¢¼æ™‚ï¼ŒGitHub æœƒè‡ªå‹•åœ¨èƒŒæ™¯å®Œæˆç·¨è­¯ä¸¦æŠŠé€™å€‹å¯†ç¢¼å¡é€²å»ã€‚
æœ€å¾Œåˆ¥å¿˜äº†ï¼Œæ‚¨çš„ Google Apps Script å…§çš„ ADMIN_SECRET ä¹Ÿè¦è¨˜å¾—æ”¹æˆ XXXXXX å–”ï¼

####æ‰‹å‹•è§¸ç™¼ï¼ˆå¦‚æœæ‚¨å‰›æ”¹å®Œ Secret å¯†ç¢¼ï¼‰
å¦‚æœæ‚¨æ²’æœ‰æ”¹ç¨‹å¼ç¢¼ï¼Œåªæ˜¯æ”¹äº† GitHub å¾Œå°çš„ Secrets å¯†ç¢¼ï¼Œæ‚¨å¯ä»¥æ‰‹å‹•å«å®ƒé‡æ–°è·‘ä¸€æ¬¡éƒ¨ç½²ï¼Œè®“æ–°å¯†ç¢¼ç”Ÿæ•ˆï¼š

æ‰“é–‹æ‚¨çš„ GitHub å°ˆæ¡ˆç¶²é ã€‚
é»æ“Šä¸Šæ–¹çš„ ã€ŒActionsã€ åˆ†é ã€‚
åœ¨å·¦å´æ¸…å–®ä¸­é»æ“Š ã€ŒBuild and Deployã€ (é€™æ˜¯æˆ‘å¹«æ‚¨å–çš„åå­—)ã€‚
æ‚¨æœƒçœ‹åˆ°å³é‚Šæœ‰ä¸€è¡Œæ·ºè—è‰²çš„å­—ï¼šã€ŒRun workflowã€(ä¸‹æ‹‰é¸å–®)ã€‚
é»æ“Šç¶ è‰²çš„ ã€ŒRun workflowã€ æŒ‰éˆ•ã€‚
GitHub å°±æœƒç«‹åˆ»é–‹å§‹åŸ·è¡Œéƒ¨ç½²ä»»å‹™ã€‚

### 3. GAS å¾Œç«¯è¨­å®š
æœ¬å°ˆæ¡ˆåŒ…å«å…©çµ„å¾Œç«¯è…³æœ¬ï¼š
1.  **è·¯ç‡ˆè³‡æ–™ç½®æ› (éœ€å¯†ç¢¼)**ï¼š
    - è…³æœ¬ä½ç½®ï¼š`scripts/data-update-gas.js`
    - è«‹è¨­å®š `ADMIN_SECRET` èˆ‡å‰ç«¯å¯†ç¢¼ä¸€è‡´ã€‚
2.  **ç¶­ä¿®å›å ±ç³»çµ± (å…å¯†ç¢¼)**ï¼š
    - è…³æœ¬ä½ç½®ï¼š`scripts/repair-report-gas.js`
    - è² è²¬è™•ç†ç…§ç‰‡ä¸Šå‚³è‡³ Google Drive èˆ‡è©¦ç®—è¡¨å¯«å…¥ã€‚

**éƒ¨ç½²æ­¥é©Ÿï¼š**
- å‰å¾€ Google è©¦ç®—è¡¨ > æ“´å……åŠŸèƒ½ > Apps Script è²¼ä¸Šå°æ‡‰ç¨‹å¼ç¢¼ã€‚
- éƒ¨ç½²ç‚ºã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ï¼Œä¸¦è¨­å®šå­˜å–æ¬Šé™ç‚ºã€Œæ‰€æœ‰äººã€ã€‚
- å–å¾—éƒ¨ç½²å¾Œçš„ `URL` ä¸¦æ›´æ–°è‡³å‰ç«¯ `constants.ts` æˆ–å°æ‡‰å…ƒä»¶ä¸­ã€‚

## ğŸ“‚ æª”æ¡ˆçµæ§‹

- `/src/components`: 
  - `StreetLightMap.tsx`: ä¸»åœ°åœ–ä»‹é¢
  - `ReplaceLightView.tsx`: è·¯ç‡ˆç½®æ›ç®¡ç† (Admin)
  - `RepairReportView.tsx`: ç¶­ä¿®å›å ±ç³»çµ± (Maintenance)
- `/src/types`: TypeScript å®šç¾©æª”
- `/public/data`: å­˜æ”¾ `Sanyi_villages.geojson` ç­‰åœ–è³‡æª”æ¡ˆ
- `/scripts`: 
  - `data-update-gas.js`: ç½®æ›ç³»çµ±å¾Œç«¯
  - `repair-report-gas.js`: å›å ±ç³»çµ±å¾Œç«¯

## ğŸ‘· è‡ªå‹•åŒ–éƒ¨ç½²

æœ¬å°ˆæ¡ˆé…ç½® GitHub Actionsï¼š
- ç•¶ç¨‹å¼ç¢¼æ¨é€è‡³ `main` åˆ†æ”¯æ™‚ï¼Œæœƒè‡ªå‹•åŸ·è¡Œ Lint æª¢æŸ¥ã€ç·¨è­¯ä¸¦éƒ¨ç½²è‡³ **GitHub Pages**ã€‚

---
*Developed for Sanyi Township Office.*
